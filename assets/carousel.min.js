const imagesGallery=document.querySelectorAll(".gallery-item"),allTags=getAllTags(imagesGallery),modal=document.querySelector(".modal"),modalImg=document.querySelector(".modal-content"),prevBtn=document.querySelector(".prev-btn"),nextBtn=document.querySelector(".next-btn"),filterButtonsContainer=document.querySelector(".filter-buttons-container"),darkBackground=document.getElementById("dark-background");let currentIndex=0,currentFilter="all";function getAllTags(e){const t=new Set;return e.forEach((e=>{const l=e.dataset.galleryTag;t.add(l)})),t}function createFilterButtons(e){const t=document.createElement("button");t.textContent="Tous",t.dataset.filter="all",filterButtonsContainer.appendChild(t),e.forEach((e=>{const t=document.createElement("button");t.textContent=e,t.dataset.filter=e,filterButtonsContainer.appendChild(t)}));document.querySelectorAll(".filter-buttons-container button").forEach((e=>{e.addEventListener("click",(()=>{selectTag(e);const t=e.dataset.filter;filterImages(t),updateCarousel(t)}))}));selectTag(document.querySelector('.filter-buttons-container button[data-filter="all"]'))}function selectTag(e){document.querySelectorAll(".filter-buttons-container button").forEach((t=>{t===e?t.classList.add("selectBtnTag"):t.classList.remove("selectBtnTag")}))}function filterImages(e){imagesGallery.forEach((t=>{const l=t.dataset.galleryTag;"all"===e||l.includes(e)?t.style.display="block":t.style.display="none"}))}function updateCarousel(e){currentFilter=e,showImage(currentIndex)}function openModal(e){modal.style.display="block",darkBackground.style.display="block",currentIndex=e,showImage(currentIndex),setTimeout((()=>{modal.classList.add("show")}),50),document.body.style.overflow="hidden"}function closeModal(){modal.classList.remove("show"),setTimeout((()=>{modal.style.display="none",darkBackground.style.display="none",document.body.style.overflow="auto"}),300)}function showImage(e){const t=imagesGallery[e];(t.dataset.galleryTag.includes(currentFilter)||"all"===currentFilter)&&(modalImg.src=t.src,currentIndex=e)}createFilterButtons(allTags),imagesGallery.forEach(((e,t)=>{e.addEventListener("click",(()=>{openModal(t)}))})),modal.addEventListener("click",(e=>{e.target===modal&&closeModal()})),prevBtn.addEventListener("click",(()=>{let e=(currentIndex-1+imagesGallery.length)%imagesGallery.length;for(;e!==currentIndex;){if(imagesGallery[e].dataset.galleryTag.includes(currentFilter)||"all"===currentFilter){showImage(e);break}e=(e-1+imagesGallery.length)%imagesGallery.length}})),nextBtn.addEventListener("click",(()=>{let e=(currentIndex+1)%imagesGallery.length;for(;e!==currentIndex;){if(imagesGallery[e].dataset.galleryTag.includes(currentFilter)||"all"===currentFilter){showImage(e);break}e=(e+1)%imagesGallery.length}}));